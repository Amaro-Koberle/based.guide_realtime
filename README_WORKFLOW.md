# RT_SCENE Export Workflow

## Your Pipeline (As It Should Be!)

```
CHAR_MrProBonobo_MASTER.blend          ENV_ApeEscapeOffice_MASTER.blend
        â†“                                  â†“
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[LINKED]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
          RT_SCENE_ApeEscape_MASTER.blend
           (camera + animation)
                      â†“
                 [EXPORT]
                      â†“
         RT_SCENE_ApeEscape.glb
                      â†“
                  Three.js
```

## Quick Start

### 1. First Time Setup

Your RT_SCENE blend file should have:
- âœ… Linked CHAR collection (File â†’ Link â†’ `CHAR_MrProBonobo_MASTER.blend`)
- âœ… Linked ENV collection (File â†’ Link â†’ `ENV_ApeEscapeOffice_MASTER.blend`)
- âœ… Camera positioned where you want
- âœ… Animation on timeline/NLA strips

**File Locations:**
- RT_SCENE: `/Users/amaro/Library/.../based.guide/3D/realtime/RT_SCENE_ApeEscape_MASTER.blend`
- CHAR: `/Users/amaro/Library/.../based.guide/3D/assets/characters/MrProBonobo/CHAR_MrProBonobo_MASTER.blend`
- ENV: `/Users/amaro/Library/.../based.guide/3D/assets/environments/ApeEscapeOffice/ENV_ApeEscapeOffice_MASTER.blend`

**Important:** Keep them as links! Don't make them local.

### 2. Daily Workflow

```bash
# Edit your character (stored in Google Drive)
# Open CHAR_MrProBonobo_MASTER.blend
# ... make changes, save ...

# Edit your environment (stored in Google Drive)
# Open ENV_ApeEscapeOffice_MASTER.blend
# ... make changes, save ...

# Edit your scene/animation/camera (stored in Google Drive)
# Open RT_SCENE_ApeEscape_MASTER.blend
# ... adjust camera, animation, etc., save ...

# Export everything (one command! Run from your web project folder)
cd /Users/amaro/Documents/dev/based.guide_realtime
./export.sh

# View in browser
# â†’ Just refresh the page!
```

That's it! ğŸ‰

## Export Methods

### Method 1: Shell Script (Easiest)

```bash
cd /Users/amaro/Documents/dev/based.guide_realtime
./export.sh
```

### Method 2: Direct Command

```bash
/Applications/Blender.app/Contents/MacOS/Blender --background --python export_rt_scene.py
```

### Method 3: From Blender UI (for debugging)

1. Open Blender
2. Go to Scripting workspace
3. Open `export_rt_scene.py`
4. Click "Run Script"
5. Check console output

## What the Export Script Does

1. Opens `RT_SCENE_ApeEscape.blend`
2. Finds all linked collections (CHAR, ENV)
3. **Temporarily** makes them local (in memory only, doesn't modify files!)
4. Exports everything to `public/RT_SCENE_ApeEscape.glb`
5. Done!

**Your source files stay clean** - links remain intact.

## Troubleshooting

### "No linked objects found"

**Problem:** RT_SCENE doesn't have linked collections

**Fix:**
1. Open `RT_SCENE_ApeEscape.blend` in Blender
2. File â†’ Link (not Append!)
3. Navigate to `CHAR_MrProBonobo.blend` â†’ Collection â†’ select character
4. Repeat for `ENV_ApeEscapeOffice.blend`
5. Save RT_SCENE file
6. Run `./export.sh` again

### "No SkinnedMeshes found"

**Problem:** Character doesn't have armature modifier

**Fix:**
1. Open `CHAR_MrProBonobo.blend`
2. Select character mesh
3. Check Modifiers panel â†’ should have Armature modifier
4. Make sure it's not disabled
5. Save and re-export

### "RT_SCENE file not found"

**Problem:** Script has wrong path

**Fix:**
1. Open `export_rt_scene.py`
2. Update `RT_SCENE_FILE` path on line 6
3. Update `OUTPUT_GLB` path on line 7
4. Save and run again

### Blender command not found

**Problem:** Blender not in expected location

**Fix:**
Open `export.sh` and update line 8 with your Blender path:
```bash
# Find your Blender path:
which blender
# or on Mac usually:
/Applications/Blender.app/Contents/MacOS/Blender
```

## File Structure

```
Google Drive (3D Assets):
â””â”€â”€ based.guide/3D/
    â”œâ”€â”€ assets/
    â”‚   â”œâ”€â”€ characters/MrProBonobo/
    â”‚   â”‚   â””â”€â”€ CHAR_MrProBonobo_MASTER.blend     â† Character source
    â”‚   â””â”€â”€ environments/ApeEscapeOffice/
    â”‚       â””â”€â”€ ENV_ApeEscapeOffice_MASTER.blend  â† Environment source
    â””â”€â”€ realtime/
        â””â”€â”€ RT_SCENE_ApeEscape_MASTER.blend        â† Scene assembly (links above)

Local Project (Web App):
based.guide_realtime/
â”œâ”€â”€ export_rt_scene.py              â† Export script (reads from Google Drive)
â”œâ”€â”€ export.sh                       â† Easy export command
â”œâ”€â”€ public/
â”‚   â””â”€â”€ RT_SCENE_ApeEscape.glb     â† Generated by export
â””â”€â”€ src/
    â””â”€â”€ main.ts                     â† Three.js loader
```

## Why This Workflow?

### âœ… Benefits

- **Fast Iteration**: Edit â†’ export â†’ refresh (2 seconds)
- **No Duplication**: Character/environment exist in one place only
- **Clear Separation**: Each file has one responsibility
- **Version Control Friendly**: Small, focused blend files
- **Team Friendly**: Multiple people can work on different assets

### âŒ Old Way (Manual)

1. Open RT_SCENE
2. Delete old character
3. File â†’ Append character
4. Position character
5. Export
6. Delete character to keep file clean
7. Save

**Too many steps!** And error-prone.

### âœ… New Way (Script)

```bash
./export.sh
```

**One command.** Done.

## Advanced: Watch Mode

Want automatic export when files change? Add this to `package.json`:

```json
{
  "scripts": {
    "watch:export": "watch './export.sh' *.blend"
  }
}
```

Then: `npm run watch:export`

Now every time you save a blend file, it auto-exports! ğŸš€

## Next Steps

1. âœ… Make sure RT_SCENE has linked collections
2. âœ… Run `./export.sh` to test
3. âœ… Check browser console for "X SkinnedMesh objects"
4. âœ… See your character!

---

**Need help?** Check the detailed guide in `PROPER_LINKED_WORKFLOW.md`

